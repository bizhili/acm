### 飞卡AI电磁预备

### 硬件概要：
#### 1模块：
##### rt1064载板：
六按键
8位数字指示灯
4位拨码开关
2+5+7电感接口
显示屏接口
多个硬件指示灯
6路pwm伺服电机接口，2路pwm舵机接口
5路编码器采集接口
电压转换芯片7.2-->5,5-->3.3
陀螺仪iic接口
两路usart串口
滤波
保护
？感应磁铁的传感器接口
？光电传感器接口
##### 电压电流采集模块
##### 驱动板
##### 陀螺仪板
##### 2+5+7电感模块
##### ？光电传感器，感应磁铁的传感器
### 软件概要：
#### 1问题：
##### 训练模型
输入量
输出量：速度，转角？
##### 训练数据来源：
1.传统电磁算法得到
2.四轮车得到
3.遥控器控制
4.如何加入噪音
##### 如何保证急停
##### 十字路口
##### 环岛
##### 保证算法的稳定
### 机械
### 1
本次测试车模使用新C车模加3010舵机，同时因为AI模型的加入，导致整个程序大小将近1MB左右。一般的M4单片机容量都不是太大，如果自己后期再加入一些其他复杂的程序，代码会更大，所以我们选用了NXP的跨界MCU RT1064来运算AI程序以及车模控制相关的程序，它具有600M的主频，内置4MB的flash，内置1M RAM，使用起来不会那么局限。
所用到的资源及用途列举如下：
-   16路AD：3-5路用于前期寻迹，模拟真实在赛道上运行的状态，便于车身周围电感采集数据，其余AD预留定位车身位置用，本次测试依旧只用了7组数据采集；
-   1个QTIMER:用于采集两个迷你编码器的数据；
-   1个LPSPI：用于驱动IPS液晶屏；
-   1个串口：用于将采集的数据通过无线模块发送给PC；
-   4路PWM：用于控制两个电机；
-   1路PWM；用于控制舵机；
- 其他外围硬件：运放采用OPA4377；编码器采用逐飞迷你编码器；液晶采用逐飞1.14寸液晶屏；无线模块采用逐飞无线透传模块；电感采用普通的工字电感，用于数据采集的一共有7路电感
#### 2、数据采集方法：
（1）使用传统的控制方法将车模跑起来，这样可以采集车模在正常运行时的数据。
（2）使用传统的控制方法+随机干扰控制，其中随机引入误差控制方向时的数据不采集，仅仅在正常的控制时采集数据，这样可以采集到车模在偏离赛道的时纠正的数据。
（3）将车模固定在一块很薄的硬纸板上，手动转动硬纸板，以获得更多姿态下的数据，为了保证手动摆动过程中车模的高度不变，我们选择了一个很薄的光滑的底板将车模固定在上面，然后移动底板来采集不同姿态下的数据




